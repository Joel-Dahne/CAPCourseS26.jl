<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Week 6 Lab: IntervalArithmetic.jl and Arblib.jl · CAPCourseS26.jl</title><meta name="title" content="Week 6 Lab: IntervalArithmetic.jl and Arblib.jl · CAPCourseS26.jl"/><meta property="og:title" content="Week 6 Lab: IntervalArithmetic.jl and Arblib.jl · CAPCourseS26.jl"/><meta property="twitter:title" content="Week 6 Lab: IntervalArithmetic.jl and Arblib.jl · CAPCourseS26.jl"/><meta name="description" content="Documentation for CAPCourseS26.jl."/><meta property="og:description" content="Documentation for CAPCourseS26.jl."/><meta property="twitter:description" content="Documentation for CAPCourseS26.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">CAPCourseS26.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Overview</a></li><li><span class="tocitem">Weeks</span><ul><li><input class="collapse-toggle" id="menuitem-2-1" type="checkbox"/><label class="tocitem" for="menuitem-2-1"><span class="docs-label">Part 1: Introduction to computer-assisted proofs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../week-1-lecture-1/">Week 1 Lecture 1 - Introduction to computer-assisted proofs</a></li><li><a class="tocitem" href="../week-1-lab/">Week 1 Lab: Setup</a></li><li><a class="tocitem" href="../week-2-lecture-1/">Week 2 Lecture 1: Discrete problems</a></li><li><a class="tocitem" href="../week-2-lecture-2/">Week 2 Lecture 2: Integer arithmetic</a></li><li><a class="tocitem" href="../week-2-lab/">Week 2 Lab: Julia basics</a></li><li><a class="tocitem" href="../week-3-lecture-1/">Week 3 Lecture 1: Computer-assisted proofs for continuous problems</a></li><li><a class="tocitem" href="../week-3-lecture-2/">Week 3 Lecture 2: Computer-assisted proofs for continuous problems</a></li><li><a class="tocitem" href="../week-3-lab/">Week 3 Lab: A simple computer-assisted proof (and VS Code)</a></li><li><a class="tocitem" href="../week-4-lecture-1/">Week 4 Lecture 1: Formal proofs</a></li><li><a class="tocitem" href="../week-4-lecture-2/">Week 4 Lecture 2: Formal proofs</a></li><li><a class="tocitem" href="../week-4-lab/">Week 4 Lab: Trying Lean</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox" checked/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">Part 2: Introduction to rigorous numerics</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../week-5-lecture-1/">Week 5 Lecture 1: Floating point numbers</a></li><li><a class="tocitem" href="../week-5-lecture-2/">Week 5 Lecture 2: Floating point numbers</a></li><li><a class="tocitem" href="../week-5-lab/">Week 5 Lab: Playing with floating points</a></li><li><a class="tocitem" href="../week-6-lecture-1/">Week 6 Lecture 1: TODO</a></li><li><a class="tocitem" href="../week-6-lecture-2/">Week 6 Lecture 2: Interval Arithmetic</a></li><li class="is-active"><a class="tocitem" href>Week 6 Lab: IntervalArithmetic.jl and Arblib.jl</a><ul class="internal"><li><a class="tocitem" href="#Intro-to-IntervalArithmetic.jl"><span>Intro to IntervalArithmetic.jl</span></a></li><li><a class="tocitem" href="#Intro-to-Arblib.jl"><span>Intro to Arblib.jl</span></a></li><li><a class="tocitem" href="#Computing-\\sin"><span>Computing <span>$\sin$</span></span></a></li></ul></li><li><a class="tocitem" href="../week-7-lecture-1/">Week 7 Lecture 1: TODO</a></li><li><a class="tocitem" href="../week-7-lecture-2/">Week 7 Lecture 2: TODO</a></li><li><a class="tocitem" href="../week-7-lab/">Week 7 Lab: TODO</a></li><li><a class="tocitem" href="../week-8-lecture-1/">Week 8 Lecture 1: TODO</a></li><li><a class="tocitem" href="../week-8-lecture-2/">Week 8 Lecture 2: TODO</a></li><li><a class="tocitem" href="../week-8-lab/">Week 8 Lab: TODO</a></li><li><a class="tocitem" href="../week-9-lecture-1/">Week 9 Lecture 1: TODO</a></li><li><a class="tocitem" href="../week-9-lecture-2/">Week 9 Lecture 2: TODO</a></li><li><a class="tocitem" href="../week-9-lab/">Week 9 Lab: TODO</a></li><li><a class="tocitem" href="../week-10-lecture-1/">Week 10 Lecture 1: TODO</a></li><li><a class="tocitem" href="../week-10-lecture-2/">Week 10 Lecture 2: TODO</a></li><li><a class="tocitem" href="../week-10-lab/">Week 10 Lab: TODO</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-3" type="checkbox"/><label class="tocitem" for="menuitem-2-3"><span class="docs-label">Part 3: Computer-assisted proofs in practice</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../week-11-lecture-1/">Week 11 Lecture 1: TODO</a></li><li><a class="tocitem" href="../week-11-lecture-2/">Week 11 Lecture 2: TODO</a></li><li><a class="tocitem" href="../week-11-lab/">Week 11 Lab: TODO</a></li><li><a class="tocitem" href="../week-12-lecture-1/">Week 12 Lecture 1: TODO</a></li><li><a class="tocitem" href="../week-12-lecture-2/">Week 12 Lecture 2: TODO</a></li><li><a class="tocitem" href="../week-12-lab/">Week 12 Lab: TODO</a></li><li><a class="tocitem" href="../week-13-lecture-1/">Week 13 Lecture 1: TODO</a></li><li><a class="tocitem" href="../week-13-lecture-2/">Week 13 Lecture 2: TODO</a></li><li><a class="tocitem" href="../week-13-lab/">Week 13 Lab: TODO</a></li><li><a class="tocitem" href="../week-14-lecture-1/">Week 14 Lecture 1: TODO</a></li><li><a class="tocitem" href="../week-14-lecture-2/">Week 14 Lecture 2: TODO</a></li><li><a class="tocitem" href="../week-14-lab/">Week 14 Lab: TODO</a></li><li><a class="tocitem" href="../week-15-lecture-1/">Week 15 Lecture 1: TODO</a></li><li><a class="tocitem" href="../week-15-lecture-2/">Week 15 Lecture 2: TODO</a></li><li><a class="tocitem" href="../week-15-lab/">Week 15 Lab: TODO</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Weeks</a></li><li><a class="is-disabled">Part 2: Introduction to rigorous numerics</a></li><li class="is-active"><a href>Week 6 Lab: IntervalArithmetic.jl and Arblib.jl</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Week 6 Lab: IntervalArithmetic.jl and Arblib.jl</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Joel-Dahne/CAPCourseS26.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/Joel-Dahne/CAPCourseS26.jl/blob/main/docs/src/week-6-lab.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Week-6-Lab:-IntervalArithmetic.jl-and-Arblib.jl"><a class="docs-heading-anchor" href="#Week-6-Lab:-IntervalArithmetic.jl-and-Arblib.jl">Week 6 Lab: IntervalArithmetic.jl and Arblib.jl</a><a id="Week-6-Lab:-IntervalArithmetic.jl-and-Arblib.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Week-6-Lab:-IntervalArithmetic.jl-and-Arblib.jl" title="Permalink"></a></h1><p>In this lab we will look at the two Julia packages <a href="https://github.com/JuliaIntervals/IntervalArithmetic.jl">IntervalArithmetic.jl</a> and <a href="https://github.com/kalmarek/Arblib.jl">Arblib.jl</a>. IntervalArithmetic.jl implements &quot;regular&quot; interval arithmetic, where the intervals are represented by their lower and upper bounds. Arblib.jl implements ball arithmetic, where the intervals are represented by a midpoint and a radius. We will make use of both of these packages throughout the course, though likely Arblib.jl to a larger extent (mostly because I&#39;m more used to that package).</p><p>For the first part of the lab (intro to IntervalArithmetic.jl and Arblib.jl) we will use the Julia REPL and the instructions below. For the second part (computing <span>$\sin$</span>) we will use the <code>lab-6.jl</code> Pluto notebook that you can find in the <code>notebooks</code> directory. The instructions for the second part are also included below, but we will use the ones in the notebook.</p><h2 id="Intro-to-IntervalArithmetic.jl"><a class="docs-heading-anchor" href="#Intro-to-IntervalArithmetic.jl">Intro to IntervalArithmetic.jl</a><a id="Intro-to-IntervalArithmetic.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Intro-to-IntervalArithmetic.jl" title="Permalink"></a></h2><p>Let us start by taking a close look at IntervalArithmetic.jl.</p><h3 id="Construction"><a class="docs-heading-anchor" href="#Construction">Construction</a><a id="Construction-1"></a><a class="docs-heading-anchor-permalink" href="#Construction" title="Permalink"></a></h3><p>Intervals are constructed using the <code>interval</code> function. With <code>interval(a, b)</code> we can construct the interval <span>$[a, b]$</span> and with <code>interval(a)</code> we get the thin interval <span>$[a, a]$</span>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using IntervalArithmetic</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; interval(1, 2) # We will get back to what _com means</code><code class="nohighlight hljs ansi" style="display:block;">[1.0, 2.0]_com</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; interval(0.1, 0.2)</code><code class="nohighlight hljs ansi" style="display:block;">[0.1, 0.2]_com</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; interval(2)</code><code class="nohighlight hljs ansi" style="display:block;">[2.0, 2.0]_com</code></pre><p>By default it will create intervals where the endpoints are of type <code>Float64</code>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; typeof(interval(1))</code><code class="nohighlight hljs ansi" style="display:block;">IntervalArithmetic.Interval{Float64}</code></pre><p>We can create intervals with endpoints of different types by giving the type as first argument.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; interval(BigFloat, 1, 2) # Note the ₂₅₆ in the output, this is the BigFloat precision</code><code class="nohighlight hljs ansi" style="display:block;">[1.0, 2.0]₂₅₆_com</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; typeof(interval(BigFloat, 1, 2))</code><code class="nohighlight hljs ansi" style="display:block;">IntervalArithmetic.Interval{BigFloat}</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; interval(Rational{Int}, 1, 2)</code><code class="nohighlight hljs ansi" style="display:block;">[1//1, 2//1]_com</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; typeof(interval(Rational{Int}, 1, 2))</code><code class="nohighlight hljs ansi" style="display:block;">IntervalArithmetic.Interval{Rational{Int64}}</code></pre><p>In practice we will mostly use <code>Float64</code> and sometimes <code>BigFloat</code>. Having endpoints which are rational numbers can sometimes be useful, but we won&#39;t see it too much.</p><p>Finally, you can create an interval from a string with its decimal representation using <code>parse</code>. This avoid issues with rounding of floating points and guarantees that the given number is contained in the interval.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; parse(Interval{Float64}, &quot;0.1&quot;) # This printing of this is weird, see next section</code><code class="nohighlight hljs ansi" style="display:block;">[0.1, 0.1]_com</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; parse(Interval{Float64}, &quot;[0.1, 0.2]&quot;)</code><code class="nohighlight hljs ansi" style="display:block;">[0.1, 0.2]_com</code></pre><h3 id="Printing"><a class="docs-heading-anchor" href="#Printing">Printing</a><a id="Printing-1"></a><a class="docs-heading-anchor-permalink" href="#Printing" title="Permalink"></a></h3><p>There are a couple of different options for how intervals are printed. The default can be set with <code>setdisplay</code>, see its documentation for more details. The default is <code>setdisplay(:infsup)</code>.</p><p>By default it only rounds to 6 significant digits, with no special handling of the different endpoints. This means that if the endpoints share the first 6 significant digits then they print the same.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; setdisplay(:infsup)</code><code class="nohighlight hljs ansi" style="display:block;">Display options:
  - format: infsup
  - decorations: true
  - NG flag: true
  - significant digits: 6</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; interval(π)</code><code class="nohighlight hljs ansi" style="display:block;">[3.14159, 3.14159]_com</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; interval(1, 1 + 1e-10)</code><code class="nohighlight hljs ansi" style="display:block;">[1.0, 1.0]_com</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; interval(Float64, 1 // 3) # Just interval(1 // 3) gives us a Rational one</code><code class="nohighlight hljs ansi" style="display:block;">[0.333333, 0.333333]_com</code></pre><p>As you can see in the above examples it also prints <code>_com</code> after the interval. This is a <a href="https://juliaintervals.github.io/IntervalArithmetic.jl/stable/manual/construction/#Decorations">decoration</a>. They keep track of extra information regarding the functions used to compute the interval. We won&#39;t care about these for now, but might come back to them later in the course.</p><p>To print everything you can use <code>setdisplay(:full)</code>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; setdisplay(:full)</code><code class="nohighlight hljs ansi" style="display:block;">Display options:
  - format: full
  - decorations: true (ignored)
  - NG flag: true (ignored)
  - significant digits: 6 (ignored)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; interval(1, 2)</code><code class="nohighlight hljs ansi" style="display:block;">Interval{Float64}(1.0, 2.0, com, true)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; interval(π)</code><code class="nohighlight hljs ansi" style="display:block;">Interval{Float64}(3.141592653589793, 3.1415926535897936, com, true)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; interval(1, 1 + 1e-10)</code><code class="nohighlight hljs ansi" style="display:block;">Interval{Float64}(1.0, 1.0000000001, com, true)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; interval(Float64, 1 // 3)</code><code class="nohighlight hljs ansi" style="display:block;">Interval{Float64}(0.3333333333333333, 0.33333333333333337, com, true)</code></pre><p>In this case the full endpoints are printed. It should however be noted that the printing doesn&#39;t take into account rounding. For example the printing of the following interval makes it look like it would contain <span>$0.1 = 1 / 10$</span>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; setdisplay(:full)</code><code class="nohighlight hljs ansi" style="display:block;">Display options:
  - format: full
  - decorations: true (ignored)
  - NG flag: true (ignored)
  - significant digits: 6 (ignored)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; interval(0.1, 0.2)</code><code class="nohighlight hljs ansi" style="display:block;">Interval{Float64}(0.1, 0.2, com, true)</code></pre><p>But this is an artefact of <span>$0.1$</span> not being exactly representable in <code>Float64</code>. We can print more digits by creating an interval of type <code>BigFloat</code>, and then we can see that the interval does in fact not contain <span>$0.1$</span> (it does contain <span>$0.2$</span> though).</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; setdisplay(:full)</code><code class="nohighlight hljs ansi" style="display:block;">Display options:
  - format: full
  - decorations: true (ignored)
  - NG flag: true (ignored)
  - significant digits: 6 (ignored)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; interval(BigFloat, 0.1, 0.2)</code><code class="nohighlight hljs ansi" style="display:block;">Interval{BigFloat}(0.1000000000000000055511151231257827021181583404541015625, 0.200000000000000011102230246251565404236316680908203125, com, true)</code></pre><p>You should be careful with reading information of intervals from their printed representation. It is usually better to use a predicate to check something directly</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; in_interval(1 // 10, interval(0.1, 0.2)) # 1 // 10 is exactly 0.1</code><code class="nohighlight hljs ansi" style="display:block;">false</code></pre><h3 id="Useful-tools"><a class="docs-heading-anchor" href="#Useful-tools">Useful tools</a><a id="Useful-tools-1"></a><a class="docs-heading-anchor-permalink" href="#Useful-tools" title="Permalink"></a></h3><p>You can get the lower and upper bounds of the interval using <code>inf</code> and <code>sup</code>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; x = interval(1, 2)</code><code class="nohighlight hljs ansi" style="display:block;">Interval{Float64}(1.0, 2.0, com, true)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; inf(x)</code><code class="nohighlight hljs ansi" style="display:block;">1.0</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; sup(x)</code><code class="nohighlight hljs ansi" style="display:block;">2.0</code></pre><p>You can get the midpoint and radius using <code>mid</code> and <code>radius</code>, or both using <code>midradius</code>. You can also get the diameter with <code>diam</code>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; x = interval(1, 2)</code><code class="nohighlight hljs ansi" style="display:block;">Interval{Float64}(1.0, 2.0, com, true)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; mid(x)</code><code class="nohighlight hljs ansi" style="display:block;">1.5</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; radius(x)</code><code class="nohighlight hljs ansi" style="display:block;">0.5</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; midradius(x)</code><code class="nohighlight hljs ansi" style="display:block;">(1.5, 0.5)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; diam(x)</code><code class="nohighlight hljs ansi" style="display:block;">1.0</code></pre><p>Note that these functions return floating points and that they therefore round. For <code>radius</code> and <code>diam</code> the rounding is outwards, so they should always be at least as large as the true value. For the midpoint the rounding is to nearest. Since they round you should however be a bit careful with using these.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; x = interval(1e-100, 1)</code><code class="nohighlight hljs ansi" style="display:block;">Interval{Float64}(1.0e-100, 1.0, com, true)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; mid(x)</code><code class="nohighlight hljs ansi" style="display:block;">0.5</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; radius(x)</code><code class="nohighlight hljs ansi" style="display:block;">0.5</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; midradius(x)</code><code class="nohighlight hljs ansi" style="display:block;">(0.5, 0.5)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; diam(x)</code><code class="nohighlight hljs ansi" style="display:block;">1.0</code></pre><h2 id="Intro-to-Arblib.jl"><a class="docs-heading-anchor" href="#Intro-to-Arblib.jl">Intro to Arblib.jl</a><a id="Intro-to-Arblib.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Intro-to-Arblib.jl" title="Permalink"></a></h2><h3 id="Construction-2"><a class="docs-heading-anchor" href="#Construction-2">Construction</a><a class="docs-heading-anchor-permalink" href="#Construction-2" title="Permalink"></a></h3><p>For Arblib.jl balls are constructed using the <code>Arb</code> constructor. With <code>Arb(x)</code> we get a ball enclosing the value of <span>$x$</span>, with <code>Arb((a, b))</code> we get a ball enclosing the interval <span>$[a, b]$</span>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Arblib</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; Arb(1)</code><code class="nohighlight hljs ansi" style="display:block;">1.0</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; Arb(1 // 3)</code><code class="nohighlight hljs ansi" style="display:block;">[0.33333333333333333333333333333333333333333333333333333333333333333333333333333 +/- 4.78e-78]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; Arb(π)</code><code class="nohighlight hljs ansi" style="display:block;">[3.1415926535897932384626433832795028841971693993751058209749445923078164062862 +/- 1.93e-77]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; Arb(&quot;0.1&quot;)</code><code class="nohighlight hljs ansi" style="display:block;">[0.1000000000000000000000000000000000000000000000000000000000000000000000000000 +/- 1.95e-78]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; Arb(&quot;[0.1 +/- 1e-10]&quot;)</code><code class="nohighlight hljs ansi" style="display:block;">[0.10000000 +/- 1.01e-10]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; Arb((1, 2)) # Note that this prints like [+/- 2.01], we&#39;ll get back to this</code><code class="nohighlight hljs ansi" style="display:block;">[+/- 2.01]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; Arb((-1, 1))</code><code class="nohighlight hljs ansi" style="display:block;">[+/- 1.01]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; Arb((1 // 3, π))</code><code class="nohighlight hljs ansi" style="display:block;">[+/- 3.15]</code></pre><p>An alternative, slightly lower level, constructor is <code>setball</code>. We have that <code>setball(Arb, m, r)</code> creates a ball with midpoint <code>m</code> and radius <code>r</code>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; setball(Arb, 0, 1)</code><code class="nohighlight hljs ansi" style="display:block;">[+/- 1.01]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; setball(Arb, 1, 1e-10)</code><code class="nohighlight hljs ansi" style="display:block;">[1.000000000 +/- 1.01e-10]</code></pre><p>With <code>setball</code> the midpoint <code>m</code> is first rounded to a floating point. This for example means that <code>setball(Arb, 1 // 3, 0)</code> will not actually contain the number <code>1 / 3</code>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; x = setball(Arb, 1 // 3, 0)</code><code class="nohighlight hljs ansi" style="display:block;">[0.33333333333333333333333333333333333333333333333333333333333333333333333333333 +/- 4.78e-78]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; radius(x)</code><code class="nohighlight hljs ansi" style="display:block;">0</code></pre><p>If rounding for the midpoint needs to be taken into account <code>add_error</code> is more useful, <code>add_error(x::Arb, err)</code> will return the ball <code>x</code> with <code>err</code> added to its radius.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; x = Arb(1 // 3)</code><code class="nohighlight hljs ansi" style="display:block;">[0.33333333333333333333333333333333333333333333333333333333333333333333333333333 +/- 4.78e-78]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; y = add_error(x, Arb(&quot;1e-50&quot;))</code><code class="nohighlight hljs ansi" style="display:block;">[0.3333333333333333333333333333333333333333333333333 +/- 4.34e-50]</code></pre><h3 id="Printing-2"><a class="docs-heading-anchor" href="#Printing-2">Printing</a><a class="docs-heading-anchor-permalink" href="#Printing-2" title="Permalink"></a></h3><p>Similar to for IntervalArithmetic.jl there are a couple of options when printing Arb values. For Arblib.jl there is however no global setting, instead the <code>string</code> function is used with different arguments. See the documentation of <code>string</code> for all the options.</p><p>Arb values are printed on the form <code>[m +/- r]</code> and by default the printed value is guaranteed to enclose the true interval. The output for the midpoint is rounded so that the value is correct up to 1 ulp (unit in the last decimal place). The following example from the documentation of <code>string</code> shows that this behavior in some cases can be slightly confusing</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; x = Arb((1, 2))</code><code class="nohighlight hljs ansi" style="display:block;">[+/- 2.01]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; string(x)</code><code class="nohighlight hljs ansi" style="display:block;">&quot;[+/- 2.01]&quot;</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; string(x, more = true)</code><code class="nohighlight hljs ansi" style="display:block;">&quot;[1.5000000000000000000000000000000000000000000000000000000000000000000000000000 +/- 0.501]&quot;</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; string(x, digits = 5, more = true)</code><code class="nohighlight hljs ansi" style="display:block;">&quot;[1.5000 +/- 0.501]&quot;</code></pre><p>Compared to IntervalArithmetic.jl you can hence trust that the true value is contained in the printed output. As the above example shows there are however often large overestimations in the printed value, in particular when no or very few significant digits of the output can be determined.</p><h3 id="Useful-tools-2"><a class="docs-heading-anchor" href="#Useful-tools-2">Useful tools</a><a class="docs-heading-anchor-permalink" href="#Useful-tools-2" title="Permalink"></a></h3><p>You can get the midpoint and radius of a ball using <code>midpoint</code> and <code>radius</code> or <code>getball</code>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; x = Arb(1 // 3)</code><code class="nohighlight hljs ansi" style="display:block;">[0.33333333333333333333333333333333333333333333333333333333333333333333333333333 +/- 4.78e-78]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; midpoint(x)</code><code class="nohighlight hljs ansi" style="display:block;">0.33333333333333333333333333333333333333333333333333333333333333333333333333333</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; radius(x)</code><code class="nohighlight hljs ansi" style="display:block;">4.31808428e-78</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; getball(x)</code><code class="nohighlight hljs ansi" style="display:block;">(0.33333333333333333333333333333333333333333333333333333333333333333333333333333, 4.31808428e-78)</code></pre><p>By default the midpoint and radius are returned as floating points (<code>Arf</code> for the midpoint, <code>Mag</code> for the radius). You can get them as <code>Arb</code> values (with radius zero)</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; x = Arb(1 // 3)</code><code class="nohighlight hljs ansi" style="display:block;">[0.33333333333333333333333333333333333333333333333333333333333333333333333333333 +/- 4.78e-78]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; midpoint(Arb, x)</code><code class="nohighlight hljs ansi" style="display:block;">[0.33333333333333333333333333333333333333333333333333333333333333333333333333333 +/- 4.55e-79]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; radius(Arb, x)</code><code class="nohighlight hljs ansi" style="display:block;">[4.3180842775472223126931759314001997855580001822181406925118517350842959015812e-78 +/- 1.36e-155]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; getball(Arb, x)</code><code class="nohighlight hljs ansi" style="display:block;">([0.33333333333333333333333333333333333333333333333333333333333333333333333333333 +/- 4.55e-79], [4.3180842775472223126931759314001997855580001822181406925118517350842959015812e-78 +/- 1.36e-155])</code></pre><p>This is often more useful if you want to later do calculations with them.</p><p>You can get lower and upper bounds with <code>lbound</code>, <code>ubound</code> and <code>getinterval</code>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; x = Arb(1 // 3)</code><code class="nohighlight hljs ansi" style="display:block;">[0.33333333333333333333333333333333333333333333333333333333333333333333333333333 +/- 4.78e-78]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; lbound(x)</code><code class="nohighlight hljs ansi" style="display:block;">0.33333333333333333333333333333333333333333333333333333333333333333333333333333</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; ubound(x)</code><code class="nohighlight hljs ansi" style="display:block;">0.33333333333333333333333333333333333333333333333333333333333333333333333333333</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; getinterval(x)</code><code class="nohighlight hljs ansi" style="display:block;">(0.33333333333333333333333333333333333333333333333333333333333333333333333333333, 0.33333333333333333333333333333333333333333333333333333333333333333333333333333)</code></pre><p>By default these are returned as floating points, you can get them as <code>Arb</code> values (with radius zero)</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; x = Arb(1 // 3)</code><code class="nohighlight hljs ansi" style="display:block;">[0.33333333333333333333333333333333333333333333333333333333333333333333333333333 +/- 4.78e-78]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; lbound(Arb, x)</code><code class="nohighlight hljs ansi" style="display:block;">[0.33333333333333333333333333333333333333333333333333333333333333333333333333333 +/- 3.87e-78]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; ubound(Arb, x)</code><code class="nohighlight hljs ansi" style="display:block;">[0.33333333333333333333333333333333333333333333333333333333333333333333333333333 +/- 4.78e-78]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; getinterval(Arb, x)</code><code class="nohighlight hljs ansi" style="display:block;">([0.33333333333333333333333333333333333333333333333333333333333333333333333333333 +/- 3.87e-78], [0.33333333333333333333333333333333333333333333333333333333333333333333333333333 +/- 4.78e-78])</code></pre><p>Note that these values are not the exact lower and upper bounds of the interval, they are floating point values given by rounding the true values outwards.</p><p>The <code>Arblib.rel_accuracy_bits</code> function can be used to get the relative accuracy of a ball.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; x = Arb(1 // 3)</code><code class="nohighlight hljs ansi" style="display:block;">[0.33333333333333333333333333333333333333333333333333333333333333333333333333333 +/- 4.78e-78]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; Arblib.rel_accuracy_bits(x)</code><code class="nohighlight hljs ansi" style="display:block;">254</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; y = add_error(x, Arb(1e-16))</code><code class="nohighlight hljs ansi" style="display:block;">[0.333333333333333 +/- 4.34e-16]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; Arblib.rel_accuracy_bits(y)</code><code class="nohighlight hljs ansi" style="display:block;">51</code></pre><h2 id="Computing-\\sin"><a class="docs-heading-anchor" href="#Computing-\\sin">Computing <span>$\sin$</span></a><a id="Computing-\\sin-1"></a><a class="docs-heading-anchor-permalink" href="#Computing-\\sin" title="Permalink"></a></h2><p>We are now ready to compute <span>$\sin$</span> using both IntervalArithmetic.jl and Arblib.jl!</p><p>As before we will use a Taylor expansion around zero. Compared to before we will however not use a fixed degree for the expansion, but allow it to be easily changed. Recall that</p><p class="math-container">\[\sin(x) = \sum_{n = 0}^\infty (-1)^n\frac{x^{2n + 1}}{(2n + 1)!}.\]</p><p>Since the series is alternating the error we get if we only sum up to term <span>$N$</span> is bounded by term <span>$N + 1$</span>, i.e.</p><p class="math-container">\[\left|\sin(x) - \sum_{n = 0}^N (-1)^n\frac{x^{2n + 1}}{(2n + 1)!}\right| \leq \frac{|x|^{2N + 3}}{(2N + 3)!}.\]</p><p>This bound can be improved, but it is good enough for our purposes. Note that we don&#39;t put any restrictions on the value of <span>$x$</span> here. For large values of <span>$x$</span> the error bound will of course be very large, but it is still valid.</p><p>Here is an implementation of this approach for <code>Float64</code>. Note that it doesn&#39;t actually do anything with the computed error bound.</p><pre><code class="language-julia hljs">function my_sin(x::Float64; N::Integer = 6)
    y = 0.0
    for n in 0:N
        y += (-1)^n * x^(2n + 1) / factorial(2n + 1)
    end
    # For Float64 we can&#39;t actually do anything with this value...
    err = abs(x)^(2N + 3) / factorial(2N + 3)
    return y
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">my_sin (generic function with 1 method)</code></pre><p>Let us check that it seems to work</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; my_sin(1.0)</code><code class="nohighlight hljs ansi" style="display:block;">0.8414709848086585</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; sin(1.0)</code><code class="nohighlight hljs ansi" style="display:block;">0.8414709848078965</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; my_sin(1.0) ≈ sin(1.0)</code><code class="nohighlight hljs ansi" style="display:block;">true</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; my_sin(10.0) # For large values of x we would need more terms</code><code class="nohighlight hljs ansi" style="display:block;">548.9651500762614</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; sin(10.0)</code><code class="nohighlight hljs ansi" style="display:block;">-0.5440211108893698</code></pre><p>Let us now implement <code>Interval{Float64}</code> and <code>Arb</code> versions of this function! Here we do want to correctly handle the error bounds as well.</p><pre><code class="language-julia hljs">function my_sin(x::Interval{Float64}; N::Integer = 6)
    # TASK: Implement this
end

function my_sin(x::Arb; N::Integer = 6)
    # TASK: Implement this
end</code></pre><details class="admonition is-details" id="Solution-dcdd1bb9029af945"><summary class="admonition-header">Solution<a class="admonition-anchor" href="#Solution-dcdd1bb9029af945" title="Permalink"></a></summary><div class="admonition-body"><pre><code class="language-julia hljs">function my_sin(x::Interval{Float64}; N::Integer = 6)
    y = zero(x)
    for n in 0:N
        y += (-1)^n * x^(2n + 1) / factorial(2n + 1)
    end
    err = abs(x)^(2N + 3) / factorial(2N + 3)
    return y + interval(-sup(err), sup(err))
end

function my_sin(x::Arb; N::Integer = 6)
    y = zero(x)
    for n in 0:N
        y += (-1)^n * x^(2n + 1) / factorial(2n + 1)
    end
    err = abs(x)^(2N + 3) / factorial(2N + 3)
    return add_error(y, err)
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">my_sin (generic function with 3 methods)</code></pre></div></details><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; setdisplay(:full) # To see the full output</code><code class="nohighlight hljs ansi" style="display:block;">Display options:
  - format: full
  - decorations: true (ignored)
  - NG flag: true (ignored)
  - significant digits: 6 (ignored)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; my_sin(interval(1))</code><code class="nohighlight hljs ansi" style="display:block;">Interval{Float64}(0.8414709848078934, 0.8414709848094235, com, false)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; sin(interval(1))</code><code class="nohighlight hljs ansi" style="display:block;">Interval{Float64}(0.8414709848078965, 0.8414709848078966, com, true)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; issubset_interval(sin(interval(1)), my_sin(interval(1)))</code><code class="nohighlight hljs ansi" style="display:block;">true</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; my_sin(Arb(1))</code><code class="nohighlight hljs ansi" style="display:block;">[0.84147098481 +/- 2.11e-12]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; sin(Arb(1))</code><code class="nohighlight hljs ansi" style="display:block;">[0.8414709848078965066525023216302989996225630607983710656727517099919104043912 +/- 4.00e-77]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; Arblib.contains(my_sin(Arb(1)), sin(Arb(1)))</code><code class="nohighlight hljs ansi" style="display:block;">true</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; my_sin(interval(10)) # For large values of x we get enormous error bounds</code><code class="nohighlight hljs ansi" style="display:block;">Interval{Float64}(-215.75122310572146, 1313.6815232582435, com, false)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; my_sin(Arb(10))</code><code class="nohighlight hljs ansi" style="display:block;">[+/- 1.32e+3]</code></pre><p>With these two implementations, some of the things we can look at are:</p><ul><li>How does the radius of the <code>Interval</code> and <code>Arb</code> versions compare? For example for <span>$x = 1$</span>.</li><li>What happens if you increase <span>$N$</span>? Hint: At some point you will get an error and need to adjust the code.</li><li>What happens for wide input? <span>$x = [0.999, 1.001],\ [0.9, 1.1],\ [0, 1],\ [0, 2]$</span>? Or even larger!</li><li>Can we do better for wide input? There are two reasonable approaches, one better for <code>Interval</code> and one for <code>Arb</code>.</li><li>For large values of <span>$x$</span> you first want to reduce the argument to a smaller value using the periodicity. How could this be done?</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../week-6-lecture-2/">« Week 6 Lecture 2: Interval Arithmetic</a><a class="docs-footer-nextpage" href="../week-7-lecture-1/">Week 7 Lecture 1: TODO »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Friday 27 February 2026 18:01">Friday 27 February 2026</span>. Using Julia version 1.12.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
